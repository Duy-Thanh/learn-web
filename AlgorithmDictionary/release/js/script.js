var access_token="";function index(){const e=document.getElementById("loaderContainer"),t=document.getElementById("errorConnection"),n=document.getElementById("bodyClass");e.style.display="block",setTimeout((()=>{API_index().then((o=>{o?(e.style.display="none",t.style.display="none",n.style.display="block"):(e.style.display="none",t.style.display="block",n.style.display="none")}))}),3e3)}function login(){const e=new URL(window.location.href),t=new URLSearchParams(e.search);var n="",o="";for(const[e,l]of t.entries())"email"==e?n=l:"password"==e&&(o=l);if(n.length>0&&o.length>0){var l=API_login(n,o);document.cookie=`userDetails=${encodeURIComponent(l)}; path=/; domain=cyberblog.click; SameSite=None; Secure; max-age=31536000;`,window.location.href="/"}}function loadUser(){API_getCurrentUser().then((e=>{const t=document.querySelector("#account_management");if(t){const n=`\n    <ul class="navbar-nav">\n                    <li class="nav-item">\n                        <a id="login" class="nav-link transition" href="#">Chào mừng, ${e.fullname}</a>\n                    </li>\n                    <li class="nav-item">\n                        <a id="logout" class="nav-link transition" href="#" onclick="logout();">Đăng xuất</a>\n                    </li>\n                </ul>`;t.outerHTML=n}else console.error("Internal Error (500)")})).catch((e=>{console.log(e)}))}function handleClick(e){API_DisplayAlgorithms().then((t=>{for(var n=0,o=0;o<t.length;o++)if(t[o].id==e){n=o;break}document.querySelector("#name").innerHTML="<h1>"+(t[n].title.replace(/\n/g,"<br>")?t[n].title.replace(/\n/g,"br"):"Thuật toán không xác định")+"</h1>";document.querySelector("#definition").innerHTML="<p>"+(t[n].algorithmDefinition.replace(/\n/g,"<br>")?t[n].algorithmDefinition.replace(/\n/g,"<br>"):"Thuật toán không có khái niệm")+"</p><br>";document.querySelector("#howtowork").innerHTML="<p>"+(t[n].algorithmHowToWork.replace(/\n/g,"<br>")?t[n].algorithmHowToWork.replace(/\n/g,"<br>"):"Thuật toán không có cách sử dụng")+"</p><br>";document.querySelector("#app").innerHTML="<p>"+(!t[n].algorithmApplication||t[n].algorithmApplication.replace(/\n/g,"<br>")?t[n].algorithmApplication.replace(/\n/g,"<br>"):"Thuật toán không có ứng dụng")+"</p><br>";document.querySelector("#ex").innerHTML='<div class="code-container"><pre><code class="language-python">'+(t[n].algorithmExample?t[n].algorithmExample:"Thuật toán không có mã mẫu, mã giả hoặc ví dụ minh họa")+"</code></pre></div>",Prism.highlightAll();document.querySelector(".startup").style.display="none";document.querySelector(".algorithmContent").style.display="block"}))}function loadAlgorithms(){API_DisplayAlgorithms().then((e=>{try{const t=document.querySelector(".list-group");t.innerHTML="",e.forEach((e=>{const n=document.createElement("li");n.classList.add("list-group-item");const o=document.createElement("div");o.classList.add("item");const l=document.createElement("span");l.classList.add("label");const a=document.createElement("a");a.classList.add("btn"),a.style.width="14vw",a.style.height="12vh",a.style.marginLeft="-1.08vw",a.style.marginTop="-1.25vh",a.style.marginBottom="-1.02vh",a.style.textAlign="center",a.style.justifyContent="center",a.style.padding="20px",a.style.fontSize="14px",a.style.fontWeight="bold",a.textContent=e.title,a.id=e.id,a.onclick=()=>handleClick(e.id),l.appendChild(a),o.appendChild(l),n.appendChild(o),t.appendChild(n)}))}catch(e){return}}))}function loadAlgorithmsBySearchParam(){const e=new URL(window.location.href),t=new URLSearchParams(e.search);var n="";for(const[e,o]of t.entries())"query"==e&&(n=o);n.length>0?API_DisplayAlgorithmsBySearchQuery(n).then((e=>{try{const t=document.querySelector(".list-group");if(t.innerHTML="",0===e.length){const e=document.createElement("p");return e.textContent="Không tìm thấy thuật toán :(",void t.appendChild(e)}e.forEach((e=>{const n=document.createElement("li");n.classList.add("list-group-item");const o=document.createElement("div");o.classList.add("item");const l=document.createElement("span");l.classList.add("label");const a=document.createElement("a");a.classList.add("btn"),a.style.width="14vw",a.style.height="12vh",a.style.marginLeft="-1.08vw",a.style.marginTop="-1.25vh",a.style.marginBottom="-1.02vh",a.style.textAlign="center",a.style.justifyContent="center",a.style.padding="20px",a.style.fontSize="14px",a.style.fontWeight="bold",a.textContent=e.title,a.id=e.id,a.onclick=()=>handleClick(e.id),l.appendChild(a),o.appendChild(l),n.appendChild(o),t.appendChild(n)}))}catch(e){return}})):loadAlgorithms()}function register(){const e=new URL(window.location.href),t=new URLSearchParams(e.search);var n="",o="",l="",a="",i="";for(const[e,r]of t.entries())"password"==e?l=r:"repeatPassword"==e?a=r:"fullname"==e?o=r:"username"==e?n=r:"agreeTermOfService"==e&&(i=r);"true"==i&&(l==a?API_register(n,l,o,n+"@gmail.com"):alert("Repeat password doesn not match with your password. Please try again"))}function logout(){API_logout(),window.location.href="/"}document.addEventListener("DOMContentLoaded",(function(){document.body.addEventListener("click",(function(e){e.target.matches(".btn")&&(document.querySelectorAll(".btn").forEach((function(e){e.classList.remove("clicked")})),e.target.classList.add("clicked"))}));document.getElementById("searchInput").addEventListener("input",(function(){const e=this.value;let t=new URL(window.location.href);t.searchParams.set("query",e),history.pushState({},"",t),loadAlgorithmsBySearchParam(),loadAlgorithmsBySearchParam(),loadAlgorithmsBySearchParam()}))}));